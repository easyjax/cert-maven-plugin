# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_COMMIT_MESSAGE" = "Update README.md" ]; then
    return;
  elif [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P deploy;
  else
    mvn -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: fOhcp3HDn2nvT4ucBLEDb4ASC+vbH2mIINK9sBAGQAd2Ud5W/bj71PUlJQK2e6M755J0ifxl+GBzBQWOsV5GomyYa28wp/Aay4dWlzhTgLCrADfNsQ36YTopvor+Yjm0DYL3d33oBGRfbUikFfpCRgD/yovAVW9BivK5HlzbdnwZbeCTAufuCDOsLjU150/7te6okjJ2qqjVji7wQ6iKwJnwGtydaJf67YOPGZ8fEq8QN70uNfvJIHfJTwJFMbgcHcClvLqD7pOsn54Hd5+8LRWw5wij5sVMlUZfVDBOvkuMDi+PVHQNMtYgs4U0axGbdWhfaOb6lmxTw2cAexz5PFs5nKsB+iwzarXpTtq5tHIpE1ULlVUdWW5qiqrMUSX4gVJEA5M8ea+EkUCdMgCsrU6cOb8DORIpX8ZD98629fKpzd0CI4xhMyO8P2eIqV/rO6PX+PCNTpcA2u49h67wSzwU6rdceSxWKUaiOf3QJUEP9KISPO6FBYmaUrv8kKV1OD07fAf06IrRAa6ysbGiS01tW4bjjoMQKjU4cfZBBXhtQgOU4P8xQRinzlwNSX6E17z2pKrHDgAnQxwOkcWACuW2IHyydQQbxkMUgF62fNVyDl1+THVXHmzhPq92fNDCeSxKEc5cYNp0ZZa/YJCcBzLEOOZB9Wq7GXIHhTVLwNM=
  - secure: A0Z3Nhd9OGBCJFaRIWeHGqmEZ7QitE/YPsHXm3M21WFSDiDwdYlUtFFOPp3bMx9f0ohMgrBATSx48P6EgzTXrDeiADoXNTOghGabnBphvqfKpiMKXykO4grzr/CwnZnz3YWOLe1ofcBkPaRpbhkhhvgNt0A7g3ZsRERLew9kLgJ9+im/JKMjtvjNXsC4veMkmyLdEaE3Kz5ayMAyrxoTS2fJTlzUvRYc94HcMhCWozxDwX0spDhpilBf2PAiqAntd8kvnVMxUBUn8rgIxJhwocDvMMwS915SNx2AJSubdyU4EzN7RVZ4bBtxqEWQezlalwRlBcT+q+g3KPR5r3fSSQmqkX5GXZaGeo2FS7XQPz2jleXXkcrfemI/VjJ0LXhku/z2GmdJ+ZZtXnsqC/B30uT8YIZUQideg7/rGTsD0sF3Wt2I+UqzAR3omqvR5cGzXr88QheggXr5ikOnWgEzqWzuPZLd/EO8wZSnOqgCPeTI61Mca/LB+DuRCESD+TJkjpQPhg8NE8BBlXhBcihxNt3yIlNRFTAyRvrna0+0PkejXv0ab5mwQPQBzZB2pVcFHSQbpRAyAr596ustgBXo8REoGfpSDC8XshcdVUl7U08JSawG8P3RX9g9JsLnkqUae/rf8EBAr4GHEe2uezLz7CeQy5cJME/Px1mby/DSTBw=
  - secure: uuPLCvutG89dbRyL9RRgM3g+7pjDjzIyfiwoZHA2l7Htnie7DJpBqQ35eXSKB7RK7THp16PUXyOCUZ6p1l2CUSrpeIthJT8x78tYdUKQ0PuxUO8t+U7LEeeceZS8nqK8+7enAY0uFVJ2bTqxjn332wo5P0ZuKwpQOjUnukAlKSyYTGGQllJrvrpXQm2s9hLhGIirUMqXdOGRlE0i5DWeCCN89s2Xk9dzQjGJ7yyFadIq/F8CKApvKED7fpwPUUYfgAbK5MEIRHPXPwROflhjmp55q50UIaBq+dYnOku1AKEgRfR4cWF/Y2mchW8OSc0B4NzpIVw8z3KP9Iu6ZGUJL5obnd7L4UZwpsG1PeYVN59VUkFXgH1P7PixekylcimTuxk2u0kWO8/PrHUfDkvXZp2Ei3AJcNNo6Fs+NUpS6fP+vrssrj11AasJwKO2iAO6KHcDHgQvrCLiz0ufo0q3zanXVkyY7pAVCzdjShiSriaqh7HkNtk4tas5ucSwqsyInu0nEKBibuoPDotpK/bUTkZ77PpJsLIO9ttwWXPFi6POwplSu7AYYoXcwN4g2NkXSmIIJcFuBM85465pyhwu5kZSinyAHsHvqUnMRt5xH2YxumpS0D407Hc2K1cn/wBgGVe46zTTTvuZ7wPfUKXP/aMzmbZMHZLGJ4ZaNQx7efg=
  - secure: s+NCbOY5UIV8ww92bNirXHeWMGPXCzwt2pNGh4gq+3aKxl3ctFjoQ4pLmreR3fs4xxR5mzFBpwJLz0wMt3TQ1WaWIeDAUOENi5xiG0A+T5lv3UiGdO37+0NUaTpBQRhY3fCFs4FqIdzYeV+t3HfNstaRcZ7nnVTpME262YRmr0N1VSJ7p17ewIHvxY4R04CiWk0mgKfvDpSH5w0hry7F9/CWdXkKiBrJc8ARDqKY8gdBWK4MgAeIUtTxYrBk01dFJ7PAUx6DYhMchZUBDrubChKrzr5oKKmOro42gIFlIOubO7U1HjCtfPWUHHbseC9NvG29NAknenbMefjIMWZQYu/NqHJ6P3c14GjJo0YRPvaygyWAADz4/+8ei+k0h8MrRMrtQmxuasbWGIMY8b/7A+Pj8oQrE8csYcF4Mpo7Rx9tpX2cWOL5/VYTEMR8B+oAARtqB8PBkwb6A3cFqulUTCzLf4kXe86LmAAG8wIUK1Tba57w8+cHw3+GvoDm75UjmVbblVx7XUxlYyrZqQ2LZdPvl19qgAj2hzUwcu+UD7ibkbNrYII2SK8UEmkirxe5bX7LjkzqFcHMkwA/p3DK3/JYG2xAv26juWLGwUN4kGzJ4nP9OWLxtxm4DNTq9/m2yAqA/Y8sv9nEKiLmNGqTIqnotmwc4ocuQClgkWcLPRI=
  - secure: gBQITd0f5jJHjN8fZJdaRunZ8jvSMGPYCUBpYrrs2u7vXzpQZC7SA3PWDv1XX1jMyogZv4d/zG5y0LZDeHMoynjJXjzP702fTSEiFvZdxaiU7mHPC3OPKxpw/VWrlQaXnKJCBWe404laG7x7pLhxVI4pcus6KClOXMw+sspZWLA7ln03V3+QU00IIl9H69d4Nnwg1wkt1y6MHXvB/aAlRpIi4yYM4D8p0/BKf9ZnwSPv+/SInraJ9y2Zwe4BftCjA8t8lUgnSe6gMvFWufspH43/u+j1UpW9aFp5lO74rcbUN19Vcry9sOEaE81yGCNOBvrEEAu/UX9yNlFhO6PffpxzVkgfajPW5kLh0eOEi6Q3COTqdmy4m3tFUvRms7j1GypANg8JlRoYOpjcXhkOj/+ZcX23k5NdYca4s/g4CLFXMw+smmDj6kjJKA2NW/7hFQco05yOYSWQWtx1/O3LVoM/pAzO3Vg9vDE3COLXcY5TAT7nsRjG7VlkJ78ETsqtKNepwpZtKKMd+0NqkyyD41xsqUqC3Vuv4TWFXpHGxEMBhK4KvrzQJw+JhsgIjzfaXhlERD1Q6+nuHftrZxMYGP/3Qgmg6s6TtK7o9fbGWoZewshUJO3QxRZRXTpSlzC8OIM2JzuGHRjTt3uEE87zULSd8WWwMp7o9ijKNz9bq10=
  - secure: PwiZf+iiCE6fuqkzj2NPXo5hIWOA+fBGNi6146wMJdEacP2MKFFxyBolk4+lZ4keaCUt+UiZRFIu03IZR0smV9G7hGfaHnDKbx+ehBU3pGouNLor6kEC+nkSF+UM/A+BMrjRH2s0t12STYOF/lM3FJBcI02JPBZdeleY0t6eaRnBzqeUevsA70U5c/bjDNOd5wf+z+flClSrUpQsS6FH6EzXsf9+WEJ8PIe6uZwsmCkOM2sIgh9YctfDCtsT/iFYW5s9SXPdyDySWIn2JpFXTONXBAO3WMfK0MFtRjIC3EbcukhoXvFq5h4+QTWBEaxBLQo12Bhx1SEL4nNZB+vftlQtyeyj0N/A95GNVMmzqJT3cDPMI8JBZZFK/SBdqVaHDnbNn0fVnZ+k2caNe3l3EP/og77LTqDdMYygGwBcr10N8KrlIxKQUSnulgaOdLHufqktOKe+30wH7FcJl8VQyreAuuULNJloEYZsqO9C7XwSBAaFzPE2K+WqW7hbCnCOmIkMwa25t4XRHeZXaTBxUxJaWWhDD0C+Y3CD7iUD0OhgAkzBF5+du7Clfb6boBse1Jaofa58zoWkBo4rxOmKX6EPy0a7Eg/gdELghzJfzbquQppq1hdM55xuKBl25pcanvxigAXrkRiPiaGc0MvSC5AklclzLUOsTg7ygXeETYY=
  - secure: mgsq8bij7aHRtU0RWe+AEgBpr4+dp1C4OfabR+Mxnql2DbRkvEzcOabE1NRNRnu17GJc0ski8n21QcHacXWhZBzZL+VKGH6CF8dPcQ8puhC0R48/tDfv3q6+BRwKTz656s8RXS6Ifb7zMaX7uEefStzSJy3YDfumhyZLny/k6MJf/GMKin8NsZSpEdKnZmMJwSytkm/oAY/D0LxJ0dqKJ6sezwPN/JWGdZ0bOOTcNnbh+wfXUDNfN7YcdyKGaGteNO/DPVkBqxf9dIPRnyCBlys4WNtbZeFk/pzWJv6yVCxWgTk9gDmp2TIGmhAP5nhBeWQmOHPq9aAUQvYed1PkB8fts/HeE+a378Cm3mJMdcZyVQlpIHy1bJUkpxrbCXgaHSNQiNtiy3oNAONVWszIEYxEKJvCjN6JvABL5JZ/Omq4VUc5g/02dpXrpfkcttw21OXlVgzR44vTB8okGjZRCv/bWq/SXLljHAoHmlqgiMmf5khwCSo3hY+Sm7h7jyOhSkpo3aDvU1yUGYMBxJsv9ZAlAuK4VhPR6QTGHHrSUf3urSFfELYDlJ3Gvp4Iwh18SQVOgsWuUEvoA+YHPrt1gZ0UssPQzuccIrwfkgdjKUuQ0CpTvvr2jBSOiq/xQawHsrl6clJxGg35NDXGzZpFY377wL1vcZk43L3K/fLqar4=
